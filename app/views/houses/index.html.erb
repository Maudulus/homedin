<h1>Your Houses</h1>

<nav class="top-bar" data-topbar>
  <ul class="title-area">
    <li class="name">
      <h1><a href="/">Home</a></h1>
    </li>
    <li class="toggle-topbar menu-icon"><a href="#">Menu</a></li>
  </ul>

  <section class="top-bar-section">
    <ul class="left">
      <% if user_signed_in? %>
        <li><%= "Signed in as #{current_user.username}" %></li>
        <li><%= link_to "Sign out", destroy_user_session_path, :method => :delete %></li>
      <% else %>
        <li><%= link_to 'Sign In', new_user_session_path %></li>
        <li><%= link_to 'Sign Up', new_user_registration_path %></li>
      <% end %>
    </ul>
    <ul class="left">
      <li class="has-dropdown">
        <a href="/houses">My Houses</a>
        <ul class="dropdown">
          <li><a href="/houses/new">New</a></li>
        </ul>
      </li>
    </ul>
  </section>
</nav>
<% flash.each do |name, msg| %>
      <div data-alert class="alert-box round <%= name == :notice ? 'success' : 'alert' %>">
        <%= content_tag :div, msg %>
        <a href="#" class="close">&times;</a>
      </div>
    <% end %>


<br>

<br>

<table>
  <tr>
    <th>Price</th>
    <th>Address</th>
    <th>Town</th>
    <th>Description</th>
    <th>Bedrooms</th>
    <th>Bathrooms</th>
    <th>URL</th>

  </tr>
    <% @houses.each do |house|%>
  <tr>
    <td><%= house.price %></td>
    <td><%= house.address %></td>
    <td><%= house.town %></td>
    <td><%= house.description %></td>
    <td><%= house.bedrooms %></td>
    <td><%= house.bathrooms %></td>
    <td><a href=<%= house.url %>><%= house.url %> </a> </td>
    <% if user_signed_in? %>
      <td><%= link_to 'Destroy', house, method: :delete, data: { confirm: 'Are you sure?' } %></td>
    <% end %>
    <td><%= link_to 'Edit', edit_house_path(house) %></td>
    <td><%= link_to 'SHOW', house_path(house) %></td>
</tr>
  <% end %>
</table>

<br>
<%= javascript_include_tag "//www.google.com/jsapi", "chartkick" %>
<h3>Town to Price Comparison</h3>
<%= bar_chart @houses.group(:town).average(:price) %>
<%= geo_chart @houses.group(:town).sum(:price) %>
<h3>Bedroom(s) to Price Comparison</h3>
<%= pie_chart @houses.group(:bedrooms).average(:price) %>
<%= column_chart @houses.group(:bedrooms).average(:price) %>

<br>
<h3>Bathroom(s) to Price Comparison</h3>
<%= pie_chart @houses.group(:bathrooms).average(:price) %>
<%= column_chart @houses.group(:bathrooms).average(:price) %>

